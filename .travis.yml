language: php
php:
  - 7.3
  - 7.4
  - 8.0

dist: xenial

before_script: composer install
script: composer test
deploy:
  provider: script
  script: curl -XPOST -f -H'content-type:application/json' "https://packagist.org/api/update-package?username=emartech&apiToken=${PACKAGIST_API_TOKEN}" -d"{\"repository\":{\"url\":\"${PACKAGIST_PACKAGE_URL}\"}}"
  on:
    php: 7.3
